{% extends "base.html" %}
{% block content %}
<h1>Order #{{ order.reference }}</h1>
<p><strong>Date:</strong> {{ order.created_at|date:"Y-m-d H:i" }}</p>
<p><strong>Status:</strong> {{ order.get_status_display }}</p>
<p><strong>Total:</strong> €{{ order.total }}</p>

<h5 class="mt-4">Items</h5>
<table class="table">
  <thead><tr><th>Product</th><th>Grind</th><th>Qty</th><th>Unit</th><th>Line</th></tr></thead>
  <tbody>
    {% for i in order.items.all %}
      <tr>
        <td>{{ i.product_name_snapshot }}</td>
        <td>{{ i.grind|default:"-" }}</td>
        <td>{{ i.quantity }}</td>
        <td>€{{ i.unit_price }}</td>
        <td>€{{ i.line_total }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% if order.status == "new" %}
  <a class="btn btn-primary" href="{% url 'orders:pay' order.reference %}">Pay now</a>
{% endif %}
{% endblock %}
