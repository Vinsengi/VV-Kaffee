{% load widget_tweaks %}
{% extends "base.html" %}
{% load i18n %}

{% block content %}
<div class="container py-5" style="max-width: 480px;">
  <div class="card border-0 shadow-sm rounded-4">
    <div class="card-body p-4">
      <div class="text-center mb-3">
        <!-- Optional: your logo -->
        {# <img src="{% static 'branding/logo.png' %}" alt="VV Kaffee" height="48" class="mb-2"> #}
        <h2 class="h4 fw-semibold mb-0">{% trans "Sign in" %}</h2>
        <div class="text-secondary small">{% trans "Welcome back to Vers√∂hnung und Vergebung Kaffee" %}</div>
      </div>

      {% if form.non_field_errors %}
        <div class="alert alert-danger py-2">{{ form.non_field_errors }}</div>
      {% endif %}

      <form method="post" action="{% url 'account_login' %}" novalidate>
        {% csrf_token %}

        <div class="mb-3">
          <label for="{{ form.login.id_for_label }}" class="form-label">{% trans "Username or Email" %}</label>
          {{ form.login|add_class:"form-control" }}
          {% if form.login.errors %}<div class="text-danger small mt-1">{{ form.login.errors|join:", " }}</div>{% endif %}
        </div>

        <div class="mb-2">
          <label for="{{ form.password.id_for_label }}" class="form-label">{% trans "Password" %}</label>
          {{ form.password|add_class:"form-control" }}
          {% if form.password.errors %}<div class="text-danger small mt-1">{{ form.password.errors|join:", " }}</div>{% endif %}
        </div>

        <div class="d-flex justify-content-between align-items-center mb-3">
          <div class="form-check">
            {# allauth only shows 'remember' when ACCOUNT_SESSION_REMEMBER is None #}
            {% if form.remember %}
              {{ form.remember }}
              <label class="form-check-label" for="{{ form.remember.id_for_label }}">{% trans "Remember me" %}</label>
            {% endif %}
          </div>
          <a href="{% url 'account_reset_password' %}" class="small">{% trans "Forgot password?" %}</a>
        </div>

        {% if redirect_field_value %}
          <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}">
        {% endif %}

        <button type="submit" class="btn btn-primary w-100">{% trans "Sign in" %}</button>
      </form>

      <hr class="my-4">

      <div class="text-center small">
        {% trans "Don't have an account?" %} <a href="{% url 'account_signup' %}">{% trans "Register" %}</a>
      </div>

      {# Optional social logins if you enable providers #}
      {% if provider_login_url or account_providers %}
        <div class="mt-3">
          {% include "socialaccount/snippets/provider_list.html" with process="login" %}
        </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
